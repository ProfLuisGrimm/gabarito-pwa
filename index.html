<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Gabaritos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }

    .tabs {
      display: flex;
      margin-bottom: 20px;
    }

    .tab-button {
      padding: 10px 20px;
      border: 1px solid #ccc;
      border-bottom: none;
      background: #eee;
      cursor: pointer;
    }

    .tab-button.active {
      background: #fff;
      border-bottom: 1px solid #fff;
      font-weight: bold;
    }

    .tab-content {
      border: 1px solid #ccc;
      background: #fff;
      padding: 20px;
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .controls {
      margin-bottom: 20px;
    }

    .controls label {
      margin-right: 15px;
    }

    .controls input[type="number"] {
      width: 60px;
    }

    .slider-container {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .slider-container input[type="range"] {
      flex: 1;
    }

    .print-area {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .page {
      background: #fff;
      border: 1px solid #000;
      box-sizing: border-box;
      margin: 5px;
      padding: 10px 15px;
      display: inline-block;
    }

    /* tamanhos por quantidade por folha */
    .layout-1 .page { width: auto; } /* <- aqui o ajuste da borda */
    .layout-2 .page { width: calc(50% - 5px); }
    .layout-4 .page { width: calc(50% - 5px); }

    .bubble {
      display: inline-block;
      border: 1px solid #000;
      border-radius: 50%;
      margin: 2px;
      text-align: center;
      line-height: 1;
      vertical-align: middle;
    }

    #version {
      position: fixed;
      bottom: 10px;
      right: 10px;
      font-size: 12px;
      color: #333;
    }

    @media print {
      body { background: #fff; }
      .tabs, .controls, #printButton, #version { display: none; }
      .print-area { gap: 0; }
      .page { margin: 0; border: 1px solid #000; page-break-inside: avoid; }
    }
  </style>
</head>
<body>
  <div class="tabs">
    <button class="tab-button active" data-tab="tab1">Gerador</button>
    <button class="tab-button" data-tab="tab2">Configurações</button>
  </div>

  <div id="tab1" class="tab-content active">
    <div class="controls">
      <label>Questões: <input type="number" id="questions" value="10" min="1" max="100"></label>
      <label>Alternativas: <input type="number" id="alternatives" value="5" min="2" max="10"></label>
      <label>Cartões por folha:
        <select id="layout">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="4">4</option>
        </select>
      </label>
      <div class="slider-container">
        <label for="bubbleSize">Tamanho das bolhas:</label>
        <input type="range" id="bubbleSize" min="10" max="40" value="20">
        <span id="bubbleSizeValue">20px</span>
      </div>
    </div>
    <button id="printButton">Imprimir</button>
    <div class="print-area" id="printArea"></div>
  </div>

  <div id="tab2" class="tab-content">
    <p>Aqui você pode adicionar configurações extras no futuro.</p>
  </div>

  <div id="version">Versão 1.10</div>

  <script>
    const tabs = document.querySelectorAll('.tab-button');
    const contents = document.querySelectorAll('.tab-content');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(btn => btn.classList.remove('active'));
        contents.forEach(content => content.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    const questionsInput = document.getElementById('questions');
    const alternativesInput = document.getElementById('alternatives');
    const layoutSelect = document.getElementById('layout');
    const printArea = document.getElementById('printArea');
    const bubbleSizeInput = document.getElementById('bubbleSize');
    const bubbleSizeValue = document.getElementById('bubbleSizeValue');

    function generateSheets() {
      const questions = parseInt(questionsInput.value);
      const alternatives = parseInt(alternativesInput.value);
      const layout = parseInt(layoutSelect.value);
      const bubbleSize = parseInt(bubbleSizeInput.value);
      printArea.innerHTML = '';
      printArea.className = 'print-area layout-' + layout;

      const page = document.createElement('div');
      page.className = 'page';

      for (let q = 1; q <= questions; q++) {
        const line = document.createElement('div');
        line.textContent = q + ') ';
        for (let a = 0; a < alternatives; a++) {
          const bubble = document.createElement('div');
          bubble.className = 'bubble';
          bubble.style.width = bubble.style.height = bubbleSize + 'px';
          bubble.style.lineHeight = bubbleSize + 'px';
          bubble.textContent = String.fromCharCode(65 + a);
          line.appendChild(bubble);
        }
        page.appendChild(line);
      }
      printArea.appendChild(page);
    }

    questionsInput.addEventListener('input', generateSheets);
    alternativesInput.addEventListener('input', generateSheets);
    layoutSelect.addEventListener('change', generateSheets);
    bubbleSizeInput.addEventListener('input', () => {
      bubbleSizeValue.textContent = bubbleSizeInput.value + 'px';
      generateSheets();
    });

    document.getElementById('printButton').addEventListener('click', () => {
      window.print();
    });

    generateSheets();
  </script>
</body>
</html>
