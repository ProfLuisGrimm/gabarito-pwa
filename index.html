<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Gabarito Digital</title>
<style>
  :root {
    --bubble: 22px; /* inicial, será atualizado pelo slider */
  }

  body { font-family: Arial, sans-serif; margin: 16px; }

  /* Navegação */
  .menu { display:flex; gap:8px; margin-bottom:12px; }
  .menu button { padding:8px 12px; font-weight:600; cursor:pointer; }
  #exitBtn {
    position: fixed; top:10px; right:10px; z-index:1000;
    padding:6px 10px; background:#e74c3c; color:#fff; border:0; border-radius:6px;
    font-weight:700; cursor:pointer; font-size:14px;
  }

  /* Telas */
  .screen { display:none; }
  .screen.active { display:block; }

  /* Controles */
  .controls { margin-bottom: 16px; display:flex; flex-wrap:wrap; gap:12px; align-items:center; }
  .controls label { display:flex; flex-direction:column; font-size:14px; }
  /* wrapper para manter valor + "px" na MESMA linha */
  .controls .inline { display:inline-flex; align-items:center; gap:6px; white-space:nowrap; }

  /* Área de cartões */
  #printArea { /* wrapper usado na impressão */
    display:block;
  }
  #sheetContainer {
    display:flex; flex-wrap:wrap; gap:10px; align-items:flex-start; justify-content:center;
  }

  .page {
    border: 2px solid #000;     /* borda do cartão */
    display: inline-block;      /* acompanha o conteúdo */
    padding: 14px;
    background:#fff;
    position: relative;         /* (antes era para a versão, agora não precisamos mais) */
    box-sizing: border-box;
    margin: 4px;
  }

  /* tamanhos por quantidade por folha – deixam de ocupar a largura toda e viram "cartões" */
  .layout-1 .page { width: 18cm; min-height: 26cm; }
  .layout-2 .page { width: 13cm; min-height: 18cm; }
  .layout-4 .page { width: 9cm;  min-height: 13cm; }

  /* Cabeçalho do cartão */
  .headerCard { margin-bottom: 10px; font-size: 14px; line-height: 1.8; }
  .nowrap { white-space: nowrap; }

  /* Questões/bolhas */
  .question { margin-bottom: 8px; font-size: 14px; }
  .opt {
    display:inline-flex;
    width: var(--bubble);
    height: var(--bubble);
    border: 1.6px solid #000;
    border-radius: 50%;
    align-items:center;
    justify-content:center;
    font-weight:700;
    margin-right:8px;
    user-select:none;
  }

  /* Versão FIXA na TELA (fora do cartão) */
  #appVersion {
    position: fixed;
    right: 10px;
    bottom: 10px;
    font-size: 12px;
    color: #666;
    z-index: 1000;
    pointer-events: none;
  }

  /* Impressão: só os cartões */
  @media print {
    body * { visibility: hidden !important; }
    #printArea, #printArea * { visibility: visible !important; }
    #printArea { position: absolute; left:0; top:0; width:100%; }
    .page { border: 1px solid #000; page-break-inside: avoid; break-inside: avoid; }
    /* esconder elementos de UI e a versão na impressão */
    .menu, .controls, #exitBtn, #appVersion { display:none !important; }
  }
</style>
</head>
<body>

<button id="exitBtn" onclick="window.location.href='https://github.com/seu-usuario/gabarito-pwa';">Sair ×</button>

<div class="menu">
  <button onclick="showScreen('gabaritoScreen')">Configurar Gabarito</button>
  <button onclick="showScreen('escaneamentoScreen')">Escanear Cartão</button>
</div>

<!-- Tela: Configurar Gabarito -->
<div id="gabaritoScreen" class="screen active">
  <div class="controls">
    <label>Quantidade de questões:
      <input type="number" id="numQuestions" value="10" min="1" max="60">
    </label>

    <label>Alternativas:
      <select id="numOptions">
        <option value="4" selected>4 (A–D)</option>
        <option value="5">5 (A–E)</option>
      </select>
    </label>

    <label>Gabaritos por folha:
      <select id="perPage">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="4">4</option>
      </select>
    </label>

    <label>Tamanho das bolhas:
      <span class="inline">
        <input type="range" id="bubbleSize" min="14" max="36" value="22">
        <span id="bubbleSizeValue">22</span><span>px</span>
      </span>
    </label>

    <button onclick="printSheet()">Imprimir</button>
  </div>

  <!-- Área que será impressa -->
  <div id="printArea">
    <div id="sheetContainer" class="layout-1"></div>
  </div>
</div>

<!-- Tela: Escanear Cartão
